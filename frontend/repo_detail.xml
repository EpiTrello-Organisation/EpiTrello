This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.vite/
  deps/
    _metadata.json
    package.json
src/
  api/
    fetcher.ts
  auth/
    ProtectexRoute.tsx
    token.ts
  components/
    SideMenu/
      SideMenu.module.css
      SideMenu.tsx
    TopBar/
      TopBar.module.css
      TopBar.tsx
  config/
    api.ts
  pages/
    BoardsPage/
      BoardsPage.module.css
      BoardsPage.tsx
    Homepage/
      HomePage.module.css
      HomePage.tsx
    LogInPage/
      LogInPage.module.css
      LogInPage.tsx
    SignUpPage/
      SignUpPage.module.css
      SignUpPage.tsx
    TemplatesPage/
      TemplatesPage.module.css
      TemplatesPage.tsx
  App.css
  App.tsx
  main.tsx
.eslintignore
.gitignore
.prettierignore
.prettierrc
eslint.config.js
index.html
package.json
tsconfig.app.json
tsconfig.json
tsconfig.node.json
vite.config.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".vite/deps/_metadata.json">
{
  "hash": "9669ca46",
  "configHash": "8f2ef9a0",
  "lockfileHash": "bbccd795",
  "browserHash": "fb7b8a83",
  "optimized": {},
  "chunks": {}
}
</file>

<file path=".vite/deps/package.json">
{
  "type": "module"
}
</file>

<file path="src/api/fetcher.ts">
import { getAccessToken, logout } from '@/auth/token';
import { API_BASE_URL } from '@/config/api';

export async function apiFetch(
  path: string,
  options: RequestInit = {}
) {
  const token = getAccessToken();

  const res = await fetch(`${API_BASE_URL}${path}`, {
    ...options,
    headers: {
      'Content-Type': 'application/json',
      ...(token ? { Authorization: `Bearer ${token}` } : {}),
      ...options.headers,
    },
  });

  if (res.status === 401) {
    logout();
    window.location.href = '/login';
    throw new Error('Unauthorized');
  }

  return res;
}
</file>

<file path="src/auth/ProtectexRoute.tsx">
import { Navigate } from 'react-router-dom';
import { isAuthenticated } from './token';
import type { JSX } from 'react/jsx-dev-runtime';

export default function ProtectedRoute({ children }: { children: JSX.Element }) {
  if (!isAuthenticated()) {
    return <Navigate to="/login" replace />;
  }

  return children;
}
</file>

<file path="src/auth/token.ts">
export function getAccessToken(): string | null {
  return localStorage.getItem('access_token');
}

export function isAuthenticated(): boolean {
  return !!getAccessToken();
}

export function logout() {
  localStorage.removeItem('access_token');
}
</file>

<file path="src/components/SideMenu/SideMenu.module.css">
.container {
  width: 18%;
  min-width: 220px;
  max-width: 320px;
  padding: 18px 16px;
  background: #1f1f21;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.nav {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.item {
  height: 40px;
  padding: 0 18px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  gap: 14px;
  text-decoration: none;
  color: rgba(255, 255, 255, 0.78);
  background: transparent;
}

.item:hover {
  background: rgba(255, 255, 255, 0.05);
}

.active {
  background: rgba(103, 157, 241, 0.22);
}

.active .label {
  color: #679df1;
}

.icon {
  width: 22px;
  height: 22px;
  display: grid;
  place-items: center;
  opacity: 0.9;
}

.label {
  font-size: 14px;
  font-weight: 500;
  letter-spacing: 0.2px;
}

.svg {
  width: 22px;
  height: 22px;
  fill: rgba(255, 255, 255, 0.7);
}

.svgInner {
  fill: #1f1f21;
  opacity: 0.9;
}

.active .svg {
  fill: #679df1;
}
</file>

<file path="src/components/SideMenu/SideMenu.tsx">
import { NavLink } from 'react-router-dom';
import styles from './SideMenu.module.css';

type ItemProps = {
  to: string;
  label: string;
  icon: React.ReactNode;
};

function Item({ to, label, icon }: ItemProps) {
  return (
    <NavLink
      to={to}
      className={({ isActive }) => `${styles.item} ${isActive ? styles.active : ''}`}
    >
      <span className={styles.icon} aria-hidden="true">
        {icon}
      </span>
      <span className={styles.label}>{label}</span>
    </NavLink>
  );
}

function BoardsIcon() {
  return (
    <svg viewBox="0 0 24 24" className={styles.svg} aria-hidden="true">
      <rect x="4" y="5" width="16" height="14" rx="3" />
      <rect x="7" y="8" width="5" height="8" rx="1.3" className={styles.svgInner} />
      <rect x="13" y="8" width="4" height="5.5" rx="1.3" className={styles.svgInner} />
    </svg>
  );
}

function TemplatesIcon() {
  return (
    <svg viewBox="0 0 24 24" className={styles.svg} aria-hidden="true">
      <rect x="4" y="6" width="16" height="14" rx="3" />
      <rect x="7" y="3" width="3" height="5" rx="1" />
      <rect x="14" y="3" width="3" height="5" rx="1" />
      <rect x="7" y="10" width="10" height="2.2" rx="1.1" className={styles.svgInner} />
      <rect x="7" y="14" width="7" height="2.2" rx="1.1" className={styles.svgInner} />
    </svg>
  );
}

export default function SideMenu() {
  return (
    <aside className={styles.container} aria-label="Sidebar">
      <nav className={styles.nav}>
        <Item to="/boards" label="Boards" icon={<BoardsIcon />} />
        <Item to="/templates" label="Templates" icon={<TemplatesIcon />} />
      </nav>
    </aside>
  );
}
</file>

<file path="src/components/TopBar/TopBar.module.css">
.bar {
  height: 56px;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 0 16px;
  background: #1f1f21;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.trelloButton {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  border-radius: 8px;
  text-decoration: none;
  color: #ffffff; /* texte blanc */
}

.trelloButton:hover {
  background: rgba(255, 255, 255, 0.06);
}

.trelloText {
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 0.2px;
}

.trelloIcon {
  width: 22px;
  height: 22px;
  fill: #ffffff;
  opacity: 0.95;
}

.trelloIconInner {
  fill: #1f1f21;
  opacity: 0.9;
}

.center {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
}

.search {
  width: min(520px, 100%);
  height: 36px;
  padding: 0 12px;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.06);
  color: #ffffff;
  font-size: 14px;
}

.search::placeholder {
  color: rgba(255, 255, 255, 0.55);
}

.search:focus {
  outline: none;
  border-color: rgba(103, 157, 241, 0.8);
  box-shadow: 0 0 0 2px rgba(103, 157, 241, 0.25);
}

.createButton {
  height: 36px;
  padding: 0 14px;
  border: none;
  border-radius: 10px;
  background: #679df1; /* background create button */
  color: #1f1f21; /* texte create button */
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
}

.createButton:hover {
  filter: brightness(1.03);
}

.profileButton {
  width: 28px;
  height: 28px;
  border: none;
  padding: 0;
  line-height: 0;
  background: transparent;
  border-radius: 999px;
  cursor: pointer;
  display: grid;
  place-items: center;
}

.profileButton:hover {
  background: rgba(255, 255, 255, 0.06);
}

.avatar {
  display: block;
  width: 28px;
  height: 28px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.18);
  border: 1px solid rgba(255, 255, 255, 0.18);
}


.profileWrapper {
  position: relative;
}

.profileMenu {
  position: absolute;
  top: 44px;
  right: 0;
  background: #1f1f21;
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 12px;
  padding: 6px;
  min-width: 160px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  z-index: 100;
}

.themeMenu {
  position: absolute;
  top: 0;
  right: 170px;
  background: #1f1f21;
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 12px;
  padding: 6px;
  min-width: 160px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.menuItem {
  height: 36px;
  padding: 0 12px;
  border-radius: 8px;
  background: transparent;
  border: none;
  color: #ffffff;
  font-size: 14px;
  text-align: left;
  cursor: pointer;
}

.menuItem:hover {
  background: rgba(255, 255, 255, 0.06);
}
</file>

<file path="src/components/TopBar/TopBar.tsx">
import { Link, useNavigate } from 'react-router-dom';
import { useEffect, useRef, useState } from 'react';
import { logout } from '@/auth/token';
import styles from './TopBar.module.css';

function TrelloMark() {
  return (
    <svg className={styles.trelloIcon} viewBox="0 0 24 24" aria-hidden="true">
      <rect x="3" y="4" width="18" height="16" rx="3" />
      <rect x="7" y="7" width="4.5" height="9" rx="1.2" className={styles.trelloIconInner} />
      <rect x="12.5" y="7" width="4.5" height="6.5" rx="1.2" className={styles.trelloIconInner} />
    </svg>
  );
}

export default function TopBar() {
  const navigate = useNavigate();

  const [menuOpen, setMenuOpen] = useState(false);
  const [themeOpen, setThemeOpen] = useState(false);

  const wrapperRef = useRef<HTMLDivElement | null>(null);
  const themeRef = useRef<HTMLDivElement | null>(null);

  useEffect(() => {
    if (!menuOpen) return;

    function onPointerDown(e: PointerEvent) {
      const target = e.target as Node;

      const wrapperEl = wrapperRef.current;
      const themeEl = themeRef.current;

      const clickedInWrapper = !!wrapperEl && wrapperEl.contains(target);
      const clickedInTheme = !!themeEl && themeEl.contains(target);

      if (!clickedInWrapper && !clickedInTheme) {
        setMenuOpen(false);
        setThemeOpen(false);
      }
    }

    window.addEventListener('pointerdown', onPointerDown);
    return () => window.removeEventListener('pointerdown', onPointerDown);
  }, [menuOpen]);

  return (
    <header className={styles.bar}>
      <Link to="/boards" className={styles.trelloButton} aria-label="Go to boards">
        <TrelloMark />
        <span className={styles.trelloText}>EpiTrello</span>
      </Link>

      <div className={styles.center}>
        <input
          className={styles.search}
          type="search"
          placeholder="Search"
          aria-label="Search boards"
        />
        <button type="button" className={styles.createButton}>
          Create
        </button>
      </div>

      <div className={styles.profileWrapper} ref={wrapperRef}>
        <button
          type="button"
          className={styles.profileButton}
          aria-label="Profile"
          onClick={() => {
            setMenuOpen((v) => !v);
            setThemeOpen(false);
          }}
        >
          <span className={styles.avatar} />
        </button>

        {menuOpen && (
          <div className={styles.profileMenu}>
            <button
              type="button"
              className={styles.menuItem}
              onClick={() => setThemeOpen((v) => !v)}
            >
              Theme
            </button>

            <button
              type="button"
              className={styles.menuItem}
              onClick={() => {
                logout();
                navigate('/login');
              }}
            >
              Log Out
            </button>

            {themeOpen && (
              <div className={styles.themeMenu} ref={themeRef}>
                <button type="button" className={styles.menuItem}>
                  Light
                </button>
                <button type="button" className={styles.menuItem}>
                  Dark
                </button>
                <button type="button" className={styles.menuItem}>
                  Match system
                </button>
              </div>
            )}
          </div>
        )}
      </div>
    </header>
  );
}
</file>

<file path="src/config/api.ts">
export const API_BASE_URL = import.meta.env.VITE_API_BASE_URL;
</file>

<file path="src/pages/BoardsPage/BoardsPage.module.css">
.page {
  min-height: 100vh;
  background: #1f1f21;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.shell {
  display: flex;
  min-height: calc(100vh - 56px); /* topbar = 56px */
  background: #1f1f21; /* même fond => pas de séparation visible */
}

.main {
  flex: 1;
  padding: 18px 16px;
  background: #1f1f21; /* identique au sidebar */
}
</file>

<file path="src/pages/BoardsPage/BoardsPage.tsx">
import { useEffect } from 'react';
import { apiFetch } from '@/api/fetcher';

import TopBar from '../../components/TopBar/TopBar';
import SideMenu from '../../components/SideMenu/SideMenu';
import styles from './BoardsPage.module.css';

export default function BoardsPage() {
  useEffect(() => {
    apiFetch('/api/me').catch(() => {
      // Error handled in fetcher
    });
  }, []);

  return (
    <div className={styles.page}>
      <TopBar />
      <div className={styles.shell}>
        <SideMenu />
        <main className={styles.main}>{/* vide */}</main>
      </div>
    </div>
  );
}
</file>

<file path="src/pages/Homepage/HomePage.module.css">
.nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
  border-bottom: 1px solid #ddd;
}
.navButtons {
  display: flex;
  gap: 8px;
}
.main {
  padding: 20px;
}
</file>

<file path="src/pages/Homepage/HomePage.tsx">
import { useNavigate } from 'react-router-dom';
import styles from './HomePage.module.css';

export default function HomePage() {
  const navigate = useNavigate();

  function handleSignUpClick() {
    navigate('/signup');
  }

  function handleLogInClick() {
    navigate('/login');
  }

  return (
    <div>
      <nav className={styles.nav}>
        <div>EpiTrello</div>
        <div className={styles.navButtons}>
          <button onClick={handleSignUpClick}>Sign up</button>
          <button onClick={handleLogInClick}>Log in</button>
        </div>
      </nav>

      <main className={styles.main}>
        <p>Homepage très simple pour l'instant.</p>
      </main>
    </div>
  );
}
</file>

<file path="src/pages/LogInPage/LogInPage.module.css">
.page {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #fafbfc;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.card {
  width: 100%;
  max-width: 340px;
  background: #ffffff;
  padding: 32px;
  border-radius: 6px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
  text-align: center;
}

.logoRow {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-bottom: 6px;
}

.trelloIcon {
  width: 44px;
  height: 44px;
  flex-shrink: 0;
}

.logoText {
  font-size: 40px;
  font-weight: 400;
  color: #091e42;
  line-height: 1;
  margin: 0;
}

.logo {
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 12px;
  color: #0052cc;
}

.title {
  font-size: 16px;
  font-weight: 700;
  margin: 20px 0 16px;
  color: #172b4d;
}

.form {
  display: flex;
  flex-direction: column;
  text-align: left;
}

.label {
  font-size: 12px;
  font-weight: 600;
  margin-bottom: 6px;
  color: #5e6c84;
}

.required {
  color: #de350b;
  font-weight: 700;
}

.input {
  height: 40px;
  padding: 8px 12px;
  font-size: 14px;
  border-radius: 4px;
  border: 1px solid #dfe1e6;
  margin-bottom: 12px;
}

.input:focus {
  outline: none;
  border-color: #4c9aff;
  box-shadow: 0 0 0 2px rgba(76, 154, 255, 0.3);
}

.rememberRow {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 2px 0 14px;
  user-select: none;
  cursor: pointer;
}

.checkbox {
  width: 14px;
  height: 14px;
  margin: 0;
}

.rememberText {
  font-size: 13px;
  color: #172b4d;
}

.infoIcon {
  display: inline-grid;
  place-items: center;
  width: 18px;
  height: 18px;
  border-radius: 999px;
  background: #6554c0;
  color: #fff;
  font-size: 12px;
  font-weight: 700;
}

.primaryButton {
  height: 40px;
  margin-top: 2px;
  background: #0052cc;
  color: white;
  font-size: 14px;
  font-weight: 600;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.primaryButton:hover {
  background: #0065ff;
}

.error {
  font-size: 12px;
  color: #de350b;
  margin: 0 0 10px;
}

.linksRow {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
  margin: 16px 0 14px;
  font-size: 12px;
}

.link {
  color: #6554c0;
  text-decoration: underline;
}

.dot {
  color: #6b778c;
}

.linksRow,
.linksRow:visited {
  color: #0d67e4;
}
</file>

<file path="src/pages/LogInPage/LogInPage.tsx">
import { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import styles from './LogInPage.module.css';
import { API_BASE_URL } from '@/config/api';

function TrelloLogo() {
  return (
    <svg className={styles.trelloIcon} viewBox="0 0 24 24" aria-hidden="true">
      <rect x="2" y="2" width="20" height="20" rx="3" fill="#0052CC" />
      <rect x="6" y="6" width="4" height="10" rx="1" fill="#FFFFFF" />
      <rect x="14" y="6" width="4" height="6" rx="1" fill="#FFFFFF" />
    </svg>
  );
}

export default function LogInPage() {
  const navigate = useNavigate();

  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');

  const [error, setError] = useState<string | null>(null);

  async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {
    e.preventDefault();
    setError(null);

    const res = await fetch(`${API_BASE_URL}/api/auth/login`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, password }),
    });

    if (!res.ok) {
      setError('Invalid email or password');
      return;
    }

    const data: { access_token: string; token_type?: string } = await res.json();

    if (data?.access_token) {
      localStorage.setItem('access_token', data.access_token);
      navigate('/boards');
    } else {
      setError('Unexpected server response');
    }
  }

  return (
    <main className={styles.page}>
      <div className={styles.card}>
        <div className={styles.logoRow}>
          <TrelloLogo />
          <h1 className={styles.logoText}>EpiTrello</h1>
        </div>

        <h2 className={styles.title}>Log in to continue</h2>

        <form onSubmit={handleSubmit} className={styles.form}>
          <label className={styles.label} htmlFor="email">
            Email <span className={styles.required}>*</span>
          </label>
          <input
            id="email"
            type="email"
            placeholder="Enter your email"
            className={styles.input}
            value={email}
            onChange={(e) => setEmail(e.target.value)}
          />

          <label className={styles.label} htmlFor="password">
            Password <span className={styles.required}>*</span>
          </label>
          <input
            id="password"
            type="password"
            placeholder="Enter your password"
            className={styles.input}
            value={password}
            onChange={(e) => setPassword(e.target.value)}
          />

          {error && <p className={styles.error}>{error}</p>}

          <button type="submit" className={styles.primaryButton}>
            Continue
          </button>
        </form>

        <p className={styles.linksRow}>
          <a href="/signup">Don't have an account? Sign up</a>
        </p>
      </div>
    </main>
  );
}
</file>

<file path="src/pages/SignUpPage/SignUpPage.module.css">
.page {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #fafbfc;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.card {
  width: 100%;
  max-width: 340px;
  background: #ffffff;
  padding: 32px;
  border-radius: 6px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
  text-align: center;
}

.logoRow {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  margin-bottom: 6px;
}

.trelloIcon {
  width: 44px;
  height: 44px;
  flex-shrink: 0;
}

.logoText {
  font-size: 40px;
  font-weight: 400;
  color: #091e42;
  line-height: 1;
  margin: 0;
}

.logo {
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 12px;
  color: #0052cc;
}

.title {
  font-size: 16px;
  font-weight: 700;
  margin: 20px 0 16px;
  color: #172b4d;
}

.form {
  display: flex;
  flex-direction: column;
  text-align: left;
}

.label {
  font-size: 12px;
  font-weight: 600;
  margin-bottom: 6px;
  color: #5e6c84;
}

.required {
  color: #de350b;
  font-weight: 700;
}

.input {
  height: 40px;
  padding: 8px 12px;
  font-size: 14px;
  border-radius: 4px;
  border: 1px solid #dfe1e6;
  margin-bottom: 16px;
}

.input:focus {
  outline: none;
  border-color: #4c9aff;
  box-shadow: 0 0 0 2px rgba(76, 154, 255, 0.3);
}

.primaryButton {
  height: 40px;
  margin-top: 8px;
  background: #0052cc;
  color: white;
  font-size: 14px;
  font-weight: 600;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.primaryButton:hover {
  background: #0065ff;
}

.error {
  font-size: 12px;
  color: #de350b;
  margin-bottom: 12px;
}

.linksRow {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
  margin: 16px 0 14px;
  font-size: 12px;
}

.link {
  color: #6554c0;
  text-decoration: underline;
}

.dot {
  color: #6b778c;
}

.linksRow,
.linksRow:visited {
  color: #0d67e4;
}
</file>

<file path="src/pages/SignUpPage/SignUpPage.tsx">
import { useNavigate } from 'react-router-dom';
import { useState } from 'react';
import styles from './SignUpPage.module.css';
import { API_BASE_URL } from '@/config/api';

function TrelloLogo() {
  return (
    <svg className={styles.trelloIcon} viewBox="0 0 24 24" aria-hidden="true">
      <rect x="2" y="2" width="20" height="20" rx="3" fill="#0052CC" />
      <rect x="6" y="6" width="4" height="10" rx="1" fill="#FFFFFF" />
      <rect x="14" y="6" width="4" height="6" rx="1" fill="#FFFFFF" />
    </svg>
  );
}

export default function SignUpPage() {
  const navigate = useNavigate();

  const [email, setEmail] = useState('');
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');
  const [error, setError] = useState<string | null>(null);

  async function handleSubmit(e: React.FormEvent) {
    e.preventDefault();
    setError(null);

    if (!email || !username || !password || !confirmPassword) {
      setError('Tous les champs sont requis');
      return;
    }
    if (password.length < 8) {
      setError('Le mot de passe doit contenir au moins 8 caractères');
      return;
    }
    if (password !== confirmPassword) {
      setError('Les mots de passe ne correspondent pas');
      return;
    }

    try {
      const res = await fetch(`${API_BASE_URL}/api/auth/register`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email, username, password }),
      });

      if (res.status === 200) {
        navigate('/login');
      } else if (res.status === 400) {
        setError('Email already used');
      } else {
        setError('Une erreur est survenue');
      }
    } catch (err) {
      setError('Une erreur est survenue');
    }
  }

  return (
    <main className={styles.page}>
      <div className={styles.card}>
        <div className={styles.logoRow}>
          <TrelloLogo />
          <h1 className={styles.logoText}>EpiTrello</h1>
        </div>
        <h2 className={styles.title}>Sign up to continue</h2>

        <form onSubmit={handleSubmit} className={styles.form}>
          <label className={styles.label} htmlFor="email">
            Email <span className={styles.required}>*</span>
          </label>
          <input
            id="email"
            type="email"
            placeholder="Enter your email"
            className={styles.input}
            value={email}
            onChange={(e) => setEmail(e.target.value)}
          />

          <label className={styles.label} htmlFor="username">
            Username <span className={styles.required}>*</span>
          </label>
          <input
            id="username"
            type="text"
            placeholder="Choose a username"
            className={styles.input}
            value={username}
            onChange={(e) => setUsername(e.target.value)}
          />

          <label className={styles.label} htmlFor="password">
            Password <span className={styles.required}>*</span>
          </label>
          <input
            id="password"
            type="password"
            placeholder="Enter your password"
            className={styles.input}
            value={password}
            onChange={(e) => setPassword(e.target.value)}
          />

          <label className={styles.label} htmlFor="confirmPassword">
            Confirm password <span className={styles.required}>*</span>
          </label>
          <input
            id="confirmPassword"
            type="password"
            placeholder="Confirm your password"
            className={styles.input}
            value={confirmPassword}
            onChange={(e) => setConfirmPassword(e.target.value)}
          />

          {error && <p className={styles.error}>{error}</p>}

          <button type="submit" className={styles.primaryButton}>
            Sign up
          </button>
        </form>

        <p className={styles.linksRow}>
          <a href="/login">Already have an account? Log in</a>
        </p>
      </div>
    </main>
  );
}
</file>

<file path="src/pages/TemplatesPage/TemplatesPage.module.css">
.page {
  min-height: 100vh;
  background: #1f1f21;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.shell {
  display: flex;
  min-height: calc(100vh - 56px);
  background: #1f1f21;
}

.main {
  flex: 1;
  padding: 18px 16px;
  background: #1f1f21;
}
</file>

<file path="src/pages/TemplatesPage/TemplatesPage.tsx">
import { useEffect } from 'react';
import { apiFetch } from '@/api/fetcher';

import TopBar from '../../components/TopBar/TopBar';
import SideMenu from '../../components/SideMenu/SideMenu';
import styles from './TemplatesPage.module.css';

export default function TemplatesPage() {
  useEffect(() => {
    apiFetch('/api/me').catch(() => {
      // Error handled in fetcher
    });
  }, []);

  return (
    <div className={styles.page}>
      <TopBar />
      <div className={styles.shell}>
        <SideMenu />
        <main className={styles.main}>{/* vide */}</main>
      </div>
    </div>
  );
}
</file>

<file path="src/App.css">
html,
body {
  padding: 0;
  margin: 0;
}
</file>

<file path="src/App.tsx">
import { Routes, Route, Navigate } from 'react-router-dom';

import HomePage from './pages/Homepage/HomePage';
import SignUpPage from './pages/SignUpPage/SignUpPage';
import LogInPage from './pages/LogInPage/LogInPage';
import BoardsPage from './pages/BoardsPage/BoardsPage';
import TemplatesPage from './pages/TemplatesPage/TemplatesPage';
import './App.css';

import ProtectedRoute from './auth/ProtectexRoute';
import { isAuthenticated } from '@/auth/token';

export default function App() {
  return (
    <Routes>
      {/* Public */}
      <Route path="/" element={<HomePage />} />
      <Route path="/signup" element={<SignUpPage />} />
      <Route path="/login" element={<LogInPage />} />

      {/* Protected */}
      <Route
        path="/boards"
        element={
          <ProtectedRoute>
            <BoardsPage />
          </ProtectedRoute>
        }
      />

      <Route
        path="/templates"
        element={
          <ProtectedRoute>
            <TemplatesPage />
          </ProtectedRoute>
        }
      />

      {/* Fallback */}
      <Route
        path="*"
        element={
          isAuthenticated() ? (
            <Navigate to="/boards" replace />
          ) : (
            <Navigate to="/login" replace />
          )
        }
      />
    </Routes>
  );
}
</file>

<file path="src/main.tsx">
import React from 'react';
import ReactDOM from 'react-dom/client';
import { BrowserRouter } from 'react-router-dom';
import App from './App';

ReactDOM.createRoot(document.getElementById('root') as HTMLElement).render(
  <React.StrictMode>
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </React.StrictMode>,
);
</file>

<file path=".eslintignore">
dist/
node_modules/
</file>

<file path=".gitignore">
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?

.env
</file>

<file path=".prettierignore">
dist/
node_modules/
coverage/
</file>

<file path=".prettierrc">
{
  "printWidth": 100,
  "singleQuote": true,
  "semi": true,
  "trailingComma": "all"
}
</file>

<file path="eslint.config.js">
import js from "@eslint/js";
import globals from "globals";
import tseslint from "typescript-eslint";

import importPlugin from "eslint-plugin-import";
import unusedImports from "eslint-plugin-unused-imports";
import jsonc from "eslint-plugin-jsonc";
import yml from "eslint-plugin-yml";
import reactHooks from "eslint-plugin-react-hooks";
import reactRefresh from "eslint-plugin-react-refresh";

import jsoncParser from "jsonc-eslint-parser";
import yamlParser from "yaml-eslint-parser";

import { defineConfig, globalIgnores } from "eslint/config";

export default defineConfig([
  globalIgnores(["dist", "node_modules"]),
  {
    files: ["**/*.{ts,tsx,js,jsx}"],

    languageOptions: {
      ecmaVersion: 2023,
      sourceType: "module",
      ecmaFeatures: { jsx: true },
      globals: {
        ...globals.browser,
        ...globals.node,
      },
      parser: tseslint.parser,
    },

    plugins: {
      "@typescript-eslint": tseslint.plugin,
      import: importPlugin,
      "unused-imports": unusedImports,
      "react-hooks": reactHooks,
    },

    extends: [
      js.configs.recommended,
      ...tseslint.configs.recommended,
      reactHooks.configs.recommended,
      reactRefresh.configs.vite,
      "eslint-config-prettier",
    ],

    rules: {
      "unused-imports/no-unused-imports": "warn",
      "no-console": "off",
    },
  },

  {
    files: ["*.json", "*.jsonc", "*.json5"],

    languageOptions: {
      parser: jsoncParser,
    },

    plugins: {
      jsonc,
    },

    extends: ["plugin:jsonc/recommended-with-jsonc"],

    rules: {
      "jsonc/array-bracket-spacing": ["error", "never"],
      "jsonc/object-curly-spacing": ["error", "always"],
      "jsonc/key-spacing": [
        "error",
        { beforeColon: false, afterColon: true },
      ],
      "jsonc/quote-props": ["error", "as-needed"],
    },
  },

  {
    files: ["*.yml", "*.yaml"],

    languageOptions: {
      parser: yamlParser,
    },

    plugins: {
      yml,
    },

    extends: ["plugin:yml/standard"],

    rules: {
      "yml/indent": ["error", 2],
      "yml/no-empty-document": "error",
      "yml/quotes": ["error", { prefer: "single", avoidEscape: false }],
    },
  },
]);
</file>

<file path="index.html">
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>EpiTrello</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
</file>

<file path="package.json">
{
  "name": "frontend",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext .ts,.tsx,.js,.jsx",
    "lint:fix": "eslint . --ext .ts,.tsx,.js,.jsx --fix",
    "format": "prettier . --write",
    "format:check": "prettier . --check"
  },
  "dependencies": {
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-otp-input": "^3.1.1",
    "react-router": "^7.10.1",
    "react-router-dom": "^7.10.1"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/node": "^24.10.1",
    "@types/react": "^19.2.5",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react": "^5.1.1",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "lint-staged": "^15.3.0",
    "prettier": "^3.3.3",
    "typescript": "~5.9.3",
    "typescript-eslint": "^8.46.4",
    "vite": "^7.2.4"
  },
  "lint-staged": {
    "*.{ts,tsx,js,jsx}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{json,jsonc,json5,yml,yaml}": [
      "eslint --fix",
      "prettier --write"
    ]
  }
}
</file>

<file path="tsconfig.app.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "types": ["vite/client"],
    "skipLibCheck": true,

    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true,

    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"]
    }
  },
  "include": ["src"]
}
</file>

<file path="tsconfig.json">
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}
</file>

<file path="tsconfig.node.json">
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "types": ["node"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}
</file>

<file path="vite.config.ts">
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import path from 'path';

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, 'src'),
    },
  },
});
</file>

</files>
